FROM python:3.10-slim-bullseye

ARG DEFAULT_OTHER_HYPERCORN_ARGUMENTS=""
ENV HYPERCORN_ARGUMENTS=$DEFAULT_OTHER_HYPERCORN_ARGUMENTS

ARG DEFAULT_WORKERS=2
ENV WORKERS=$DEFAULT_WORKERS

ARG DEFAULT_BIND="127.0.0.1:8080"
ENV BIND=$DEFAULT_BIND

COPY . /home/
WORKDIR /home
RUN pip3 install -r requirements.txt
ENTRYPOINT hypercorn --bind $BIND --workers $WORKERS $HYPERCORN_ARGUMENTS wzw-microservice:application
